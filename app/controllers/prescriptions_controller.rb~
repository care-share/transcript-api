class PrescriptionsController < ApplicationController

  respond_to :json, :xml

  def home
    @prescription = Prescription.new
    @prescription.values = JSON.parse(params[:prescription_values])
    reader = PrescriptionObjectReader.new(@prescription)
    @pipeline = Pipeline.new(:reader => reader, :features => MyFeatures.new, :classifier => AllErrorsClassifier.new)

puts @pipeline.inspect
    respond_with(@prescription)
  end

  def index
    respond_to do |format|
      format.json {redirect_to :action => "home", :prescription_values => params[:prescription][:values] }
    end
  end

end



class MyFeatures < GenericFeatureExtractor
  def feature_sets;    [Features::Basic, Features::StructuredFields, Features::MedAttribDirections, Features::MedAttribFrequency, Features::ParsedStructuredFields];  end
end
